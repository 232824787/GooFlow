<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="css/public.css"/>
    <link rel="stylesheet" href="css/iconfont.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <script src="jquery-1.12.0.js"></script>
    <script src="js/json.js"></script>
    <script src="js/goofunc.js"></script>
    <script charset="GB2312" src="js/gooflow.js"></script>
    <style>

    </style>

    <script>
        var property = {
            width: 1200,
            height: 600,
            toolBtns: ["start round", "end", "task", "node"],
//            toolBtns: ["start round", "end", "task", "node", "chat", "state", "plug", "join", "fork", "complex mix"],
            haveHead: true,
            headBtns: ["new", "open", "save", "undo", "redo", "reload"],//如果haveHead=true，则定义HEAD区的按钮
            haveTool: true,
            haveGroup: true,
            useOperStack: true
        };
        var remark = {
            cursor: "选择指针",
            direct: "转换连线",
            start: "开始结点",
            "end": "结束结点",
            "task": "任务结点",
            node: "自动结点",
            chat: "决策结点",
            state: "状态结点",
            plug: "附加插件",
            fork: "分支结点",
            "join": "联合结点",
            "complex": "复合结点",
            group: "组织划分框编辑开关",
            "new": "新建",
            "open": "打开"
        };
        var gf;
        $(document).ready(function () {
            gf = $.createGooFlow($("#gf"), property);
            gf.setNodeRemarks(remark);
            //demo.onItemDel=function(id,type){
            //	return confirm("确定要删除该单元吗?");
            //}
            jsondata = {
                "nodes": {
                    "demo_node_9": {
                        "name": "桂中区",
                        "left": 51,
                        "top": 29,
                        "type": "start round",
                        "width": 24,
                        "height": 24,
                        "alt": true
                    },
                    "demo_node_10": {
                        "name": "桂北区",
                        "left": 50,
                        "top": 80,
                        "type": "start round",
                        "width": 24,
                        "height": 24,
                        "alt": true
                    },
                    "demo_node_11": {
                        "name": "桂西区",
                        "left": 50,
                        "top": 129,
                        "type": "start round",
                        "width": 24,
                        "height": 24,
                        "alt": true
                    },
                    "demo_node_12": {
                        "name": "桂北区",
                        "left": 51,
                        "top": 180,
                        "type": "start round",
                        "width": 24,
                        "height": 24,
                        "alt": true
                    },
                    "demo_node_14": {
                        "name": "桂东区",
                        "left": 49,
                        "top": 230,
                        "type": "start round",
                        "width": 24,
                        "height": 24,
                        "alt": true
                    }
                }, "lines": {}, "areas": {}
            };
            //gf.loadData(jsondata);
        });
        var out;
        function Export() {
            document.getElementById("result").value = JSON.stringify(gf.exportData());
        }
        function Import() {
            gf.clearData()
            gf.loadData(JSON.parse($("#result").val()));
        }
    </script>
</head>
<body>
<div id="gf" style="margin:10px"></div>
<input id="submito" type="button" value='导出结果' onclick="Export()"/>
<input id="submiti" type="button" value='导入数据' onclick="Import()"/>
<br/>
<textarea id="result" rows="20" cols="100"></textarea>
</body>
</html>